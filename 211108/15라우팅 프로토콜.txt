
15라우팅 프로토콜

응용 SW 기초 활용 기술 part 2
라우팅 프로토콜

라우팅 프로토콜의 개요
라우팅 프로토콜의 종류
정적 라우팅 설정

라우터의 역할과 라우팅 프로토콜을 설명할 수 있다.
정적 라우팅 프로토콜과 동적 라우팅 프로토콜을 설명할 수 있다.
정적 라우팅을 이용하여 네트워크를 구성할 수 있다.

라우팅 프로토콜의 개요

1. 라우팅(Routing)

라우터(Router)
- 서로 다른 네트워크를 연결하고, 브로드캐스트 도메인(Broadcast Domain)을 나눔  
→ 동일한 네트워크에 속한 모든 호스트로 전달되는 브로드캐스트 패킷이 다른 네트워크로 전달되는 것을 차단함

브로드캐스트 도메인				브로드캐스트 도메인
	PC						PC

PC	네트워크 A  ───────	라우터  ───────네트워크 B	PC


	PC						PC


			라우터의 주요기능
    	┌──────────┻───────┐
	경로 결정				스위칭(Switching)

패킷의 목적지 네트워크 정보 확인
	↓				결정된 경로에 따라 패킷을 전달하는 것
목적지까지 갈 수 있는 여러 경로 확인			↑
	↓					│
최적의 경로를 결정					│
	└──────────────────────		

라우터와 TCP의 기능 비교

라우터
- 라우터는 패킷이 목적지까지 잘 도착했는지에 대해서는 책임지지 않음
- 목적지까지 가는 경로 상에 위치하는 다음 라우터에 패킷을 전달하기만 함

TCP
- 패킷의 도착 여부와 도착 순서 등을 처리함

        ┌경로 결정
라우터┨		→	서로 다른 네트워크를 연결하여 원격의 호스트와 통신이 가능하도록 함
        └스위칭

라우팅(Routing) 패킷의 전달 경로를 결정하는 과정

패킷의 전송 경로 결정하기
인접 네트워크 주소와 연결 인터페이스 혹은 원격지 네트워크로 가기 위한 정보가 필요

→ 이러한 정보는 라우팅 테이블(Routing Table)에 저장

라우팅 테이블 (Routing Table)
패킷이 목적지 네트워크로 가기 위해 어떤 경로로 가야 하는지를 알려주는 네트워크 지도


라우팅 테이블을 확인하는 명령
Router# show ip route

라우터는 라우팅 테이블에 근거하여 원격지 네트워크로 가기 위한 경로를 결정하고, 목적지 경로 상의 다음 라우터로 패킷을 전달함

2. 라우팅 프로토콜(Routing Protocol)

라우팅 프로토콜 (Routing Protocol)
목적지 네트워크로 가는 경로를 알아내기 위해 사용하는 프로토콜

라우팅 프로토콜의 역할

라우터(Router) 간에 네트워크 상태 정보를 교환하기 위해 사용
		↓
라우터는 기본적으로 직접 연결된 네트워크의 정보만을 라우팅 테이블(Routing Table)에 가짐

직접 연결되지 않은 네트워크 정보를 라우팅 테이블(Routing Table)에 추가

네트워크 정보를 교환하기 위해 서로의 주소를 알아야 통신이 가능


라우팅 프로토콜의 종류

1. 정적 라우팅 프로토콜(Static Routing Protocol)

정적 라우팅 프로토콜 (Static Routing Protocol)
관리자가 목적지 네트워크의 정보를 라우터(Router)에 직접 수동으로 입력하는 라우팅 프로토콜
		↓
관리자가 지정한 경로로 무조건 패킷 전송

정해진 경로를 따서 패킷을 전송하기 때문에 라우터(Router)에 부담이 없음

일반적으로 학교나 기업에서 외부로 나가는 경로가 하나일 때 적용

정적 라우팅 프로토콜의 장점
1 라우터(Router)의 프로세서(CPU)와 메모리를 적게 사용
- 정해진 경로로만 패킷을 전송하므로, 라우터의 프로세스가 최적의 결정을 하기 위한 계산을 하지 않음

2 대역폭 절약
- 동적 라우팅 프로토콜과 달리 라우팅 테이블의 네트워크 정보를 교환하지 않음

3 보안성이 좋음
- 자신의 네트워크 정보를 외부로 전송하지 않음

정적 라우팅 프로토콜의 단점
1 시간과 비용의 증가
- 관리자가 최적의 경로를 직접 찾아서 설정해야 함

2 네트워크의 변화에 따라 대응하기 어려움
- 정적으로 설정된 경로로만 패킷을 전송하기 때문에, 설정된 경로에 문제가 발생하여도 동일한 경로로패킷을 전송함

3 상황이 수시로 변경되는 대규모 네트워크에서는 사용하기 힘듦
- 네트워크의 변화가 발생할 경우, 관리자가 직접 라우팅 테이블을 수정해야 함


2 동적 라우팅 프로토콜(Dynamic Routing Protocol)
동적 라우팅 프로토콜 (Dynamic Routing Protocol)
관리자가 목적지 네트워크로 가기 위한 경로를 직접 입력하지 않고 라우터 간의 정보 교환을 통해 
최적의 경로를 찾아서 라우팅 테이블에 등록하는 프로토콜
		↓
즉, 동일한 라우팅 프로토콜로 설정된 라우터끼리 서로의 네트워크 정보를 주기적으로 교환하면
서 라우팅 테이블에 등록된 최적의 경로를 수정하는 프로토콜

사용하는 알고리즘에 따라 최적의 경로를 설정하며,
사용하는 알고리즘은 라우팅 프로토콜에 따라 다름


동적 라우팅 프로토콜의 종류
거리 벡터(Distance Vector) 라우팅 프로토콜
- 목적지 네트워크로 가는 경로까지 거쳐야 하는 라우터의 순수 물리적인 거리를 이용하여 최적의 경로를 결정
예 RIP, IGRP 등

링크 상태(Link-State) 라우팅 프로토콜
- 대역폭과 지연 값 등의 링크의 상태를 이용하여 최적의 경로를 결정
예 OSPF 등

서로 다른 라우팅 프로토콜(Routing protocol)을 사용하는 라우터(Router) 간에는 네트워크 정보를 교환하지 않음
→ RIP 라우팅 프로토콜을 사용하는 라우터와 OSPF 라우팅 프로토콜을 사용하는
라우터 간에는 네트워크 정보를 교환하지 않음

내비게이션에서 하나의 목적지로 가는 길이 여러 개 있듯이, 라우터 간에 네트워크 정보를 교환함으로써 알게 되는 
목적지 네트워크로 가는 경로는 여러 가지가 있을 수 있음

- 최적의 경로만 라우팅 테이블에 유지
- 나머지 경로는 데이터베이스에 따로 저장
- 최적의 경로에 문제가 발생한 경우 라우팅 테이블에 저장하여 사용

동일한 라우팅 프로토콜을 사용하는 라우터 간에 네트워크 정보를 주기적으로 교환하여
라우팅 테이블을 작성하고 유지함
		↓
관리자가 라우팅 테이블을 관리해야 하는 부담이 없음
		↓
주기적인 네트워크 정보 교환을 통해 네트워크에 변화가 발생할 경우,
라우터는 데이터베이스에 저장되었던 차선의 경로를 이용하여 패킷을 전송
		↓
그러나 주기적인 네트워크 정보 교환을 통해 라우터 스스로 최적의 경로를 설정해야 하기 때문에
프로세서(CPU)와 메모리를 정적 라우팅 프로토콜에 비해 상대적으로 많이 사용하게 되어, 라우터에 부담이 됨


정적 라우팅 설정

1. 라우터(Router)의 물리적 연결
정적 라우팅을 이용하여 원격의 네트워크와 연결하는 실습을 하기 위해서는 라우터들 간의 물리적 연결을 해야 함

라우터들 간의 물리적 연결 방법
- 실제 연결 방법 : 내부 라우터와 인터넷 서비스 사업자의 라우터만 연결
- 본 과정의 실습 방법 : 패킷 트레이서에서 여러 개의 라우터를 물리적으로 연결한 후 정적 라우팅 설정

시리얼 인터페이스 추가
- 라우터의 전원을 끈 후, 왼쪽 메뉴에서 추가하고자 하는 모듈을 장착

모듈의 규칙
- NM : Network Module
- WIC : Wan Interface Card
- E : Ethernet
- FE : FastEthernet
- T : Serial

Serial 포트 넘버
- 슬롯 넘버/모듈넘버/인터페이스 넘버 순으로 할당


2. 정적 라우팅 설정

	WAN구간 (네트워크 간의 연결 구간)

	라우터───────────────라우터
			통신
	DTE				DCE
	(데이터 종단 장치)			(데이터 회로 종단 장치)

DTE (데이터 종단 장치)
사용자의 정보를 신호로 변환하거나 이를 반대로 수행하며, DCE로 통신함

DCE로 결정된 라우터에서 Clock(클럭)을 제공

정적 라우팅 설정 명령어 

Router(config)#ip route [목적지 네트워크 주소] [서브넷 마스크] [목정적 라우팅 설정 적지 방향 주소 혹은 인터페이스] 
[네트워크 메트릭 값]
→ 네트워크 메트릭 값은 생략이 가능하며, 기본값은 1

